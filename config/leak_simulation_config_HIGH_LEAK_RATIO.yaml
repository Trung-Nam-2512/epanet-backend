# Cáº¥u hÃ¬nh mÃ´ phá»ng rÃ² rá»‰ cho training ML - VERSION: HIGH LEAK RATIO
# Leak Simulation Configuration for ML Training - OPTIMIZED FOR HIGHER LEAK RATIO
# 
# Má»¤C ÄÃCH: TÄƒng leak ratio tá»« 0.14% â†’ 1-2% Ä‘á»ƒ model há»c tá»‘t hÆ¡n
# 
# THAY Äá»”I CHÃNH:
# - leaks_per_scenario: 1 â†’ 2 (2 leaks má»—i scenario)
# - duration_h_min: 5.5 â†’ 8 (leak dÃ i hÆ¡n)
# - duration_h_max: 7.2 â†’ 12 (leak dÃ i hÆ¡n)
# - start_h_max: 17 â†’ 12 (Ä‘áº£m báº£o leak khÃ´ng vÆ°á»£t 24h)

# ÄÆ°á»ng dáº«n file .inp
inp_path: "epanetVip1.inp"

# ThÆ° má»¥c output (theo yÃªu cáº§u: dataset/)
out_dir: "dataset"

# Sá»‘ lÆ°á»£ng ká»‹ch báº£n cáº§n sinh
# CÃ³ thá»ƒ giáº£m xuá»‘ng 2000 náº¿u gáº¥p thá»i gian
n_scenarios: 2000  # Giáº£m tá»« 3000 Ä‘á»ƒ generate nhanh hÆ¡n

# Äáº£m báº£o má»—i node cÃ³ Ã­t nháº¥t 1 scenario (KHUYáº¾N NGHá»Š: true)
ensure_all_nodes_covered: true

# Cáº¥u hÃ¬nh node rÃ² rá»‰
leak_nodes:
  # Náº¿u null hoáº·c [], sáº½ dÃ¹ng táº¥t cáº£ junctions
  node_list: null
  
  # ğŸ”§ THAY Äá»”I: TÄƒng tá»« 1 â†’ 2 leaks per scenario
  # Äá»ƒ tÄƒng leak ratio tá»« 0.14% â†’ ~0.8-1.0%
  leaks_per_scenario: 2  # TÄƒng tá»« 1 â†’ 2
  
# KÃ­ch thÆ°á»›c lá»— rÃ² (mÂ²) - bá»‘c thÄƒm log-uniform
leak_area_m2:
  min: 0.0001    # 0.1 cmÂ² (ráº¥t nhá»)
  max: 0.01      # 100 cmÂ² (lá»›n)

# Thá»i gian rÃ² rá»‰ (giá»)
# ğŸ”§ THAY Äá»”I: TÄƒng duration vÃ  Ä‘iá»u chá»‰nh start Ä‘á»ƒ leak dÃ i hÆ¡n
leak_time_h:
  start_h_min: 1      # Giáº£m tá»« 2 â†’ 1 (báº¯t Ä‘áº§u sá»›m hÆ¡n)
  start_h_max: 12     # Giáº£m tá»« 17 â†’ 12 (Ä‘áº£m báº£o 12+12=24, khÃ´ng vÆ°á»£t quÃ¡)
  duration_h_min: 8   # TÄƒng tá»« 5.5 â†’ 8 (leak dÃ i hÆ¡n)
  duration_h_max: 12  # TÄƒng tá»« 7.2 â†’ 12 (leak dÃ i hÆ¡n)
  # Vá»›i duration 8-12h: Leak sáº½ cÃ³ 32-48 timestamps (thay vÃ¬ 22-29)
  # â†’ TÄƒng leak ratio Ä‘Ã¡ng ká»ƒ

# Há»‡ sá»‘ xáº£ Cd (discharge coefficient)
discharge_coeff: 0.75

# Cáº¥u hÃ¬nh mÃ´ phá»ng
simulation:
  duration_h: 24          # Thá»i gian mÃ´ phá»ng tá»•ng (giá»)
  hydraulic_timestep_h: 0.25  # BÆ°á»›c thá»i gian thá»§y lá»±c (giá»)
  report_timestep_h: 0.25  # BÆ°á»›c thá»i gian bÃ¡o cÃ¡o (giá») - 15 phÃºt
  use_scada: false
  scada_hours_back: 24

# Cáº¥u hÃ¬nh nhiá»…u Ä‘o (Gaussian noise)
noise:
  pressure_sigma: 0.0
  flow_sigma: 0.0
  enabled: false

# Cáº¥u hÃ¬nh export
export:
  timeseries_format: "parquet"
  save_metadata: true
  save_csv: false
  parquet_compression: "snappy"

# Cáº¥u hÃ¬nh xá»­ lÃ½ song song
parallel:
  enabled: true
  max_workers: null  # null = sá»‘ CPU cores










